var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(a,b){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.LazyLoad=b()}(this,function(){"use strict";function a(a){return a.filter(function(a){return!l(a)})}function b(a,b){if(b)if(b.length)for(var c,d=0;c=b[d];d+=1)o(a,c);else o(a,b)}function c(a,b,c){(c||!l(a))&&(H(b.callback_enter,a),G.indexOf(a.tagName)>-1&&(L(a,b),E(a,b.class_loading)),D(a,b),k(a),H(b.callback_set,a))}var d=function(a){var b={elements_selector:"img",container:document,threshold:300,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",class_loading:"loading",class_loaded:"loaded",class_error:"error",load_delay:0,callback_load:null,callback_error:null,callback_set:null,callback_enter:null,to_webp:!1};return _extends({},b,a)},e="data-",f="was-processed",g="ll-timeout",h="true",i=function(a,b){return a.getAttribute(e+b)},j=function(a,b,c){var d=e+b;return null===c?void a.removeAttribute(d):void a.setAttribute(d,c)},k=function(a){return j(a,f,h)},l=function(a){return i(a,f)===h},m=function(a,b){return j(a,g,b)},n=function(a){return i(a,g)},o=function(a,b){var c,d="LazyLoad::Initialized",e=new a(b);try{c=new CustomEvent(d,{detail:{instance:e}})}catch(f){c=document.createEvent("CustomEvent"),c.initCustomEvent(d,!1,!1,{instance:e})}window.dispatchEvent(c)},p=function(a,b){return b?a.replace(/\.(jpe?g|png)/gi,".webp"):a},q=function(){var a="image/webp",b=document.createElement("canvas");return b.getContext&&b.getContext("2d")?0===b.toDataURL(a).indexOf("data:"+a):!1},r="undefined"!=typeof window,s=r&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),t=r&&"IntersectionObserver"in window,u=r&&"classList"in document.createElement("p"),v=r&&q(),w=function(a,b,c,d){for(var e,f=0;e=a.children[f];f+=1)if("SOURCE"===e.tagName){var g=i(e,c);x(e,b,g,d)}},x=function(a,b,c,d){c&&a.setAttribute(b,p(c,d))},y=function(a,b){var c=v&&b.to_webp,d=b.data_srcset,e=a.parentNode;e&&"PICTURE"===e.tagName&&w(e,"srcset",d,c);var f=i(a,b.data_sizes);x(a,"sizes",f);var g=i(a,d);x(a,"srcset",g,c);var h=i(a,b.data_src);x(a,"src",h,c)},z=function(a,b){var c=i(a,b.data_src);x(a,"src",c)},A=function(a,b){var c=b.data_src,d=i(a,c);w(a,"src",c),x(a,"src",d)},B=function(a,b){var c=v&&b.to_webp,d=i(a,b.data_src);if(d){var e=p(d,c);a.style.backgroundImage='url("'+e+'")'}},C={IMG:y,IFRAME:z,VIDEO:A},D=function(a,b){var c=a.tagName,d=C[c];return d?void d(a,b):void B(a,b)},E=function(a,b){return u?void a.classList.add(b):void(a.className+=(a.className?" ":"")+b)},F=function(a,b){return u?void a.classList.remove(b):void(a.className=a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""))},G=["IMG","IFRAME","VIDEO"],H=function(a,b){a&&a(b)},I="load",J="error",K=function(a,b,c){a.removeEventListener(I,b),a.removeEventListener(J,c)},L=function(a,b){var c=function e(c){M(c,!0,b),K(a,e,d)},d=function f(d){M(d,!1,b),K(a,c,f)};a.addEventListener(I,c),a.addEventListener(J,d)},M=function(a,b,c){var d=a.target;F(d,c.class_loading),E(d,b?c.class_loaded:c.class_error),H(b?c.callback_load:c.callback_error,d)},N=function(a,b,d){c(a,d),b.unobserve(a)},O=function(a){var b=n(a);b&&(clearTimeout(b),m(a,null))},P=function(a,b,c){var d=c.load_delay,e=n(a);e||(e=setTimeout(function(){N(a,b,c),O(a)},d),m(a,e))},Q=function(a){return a.isIntersecting||a.intersectionRatio>0},R=function(a){return{root:a.container===document?null:a.container,rootMargin:a.threshold+"px",threshold:0}},S=function(a,b){this._settings=d(a),this._setObserver(),this.update(b)};return S.prototype={_manageIntersection:function(a){var b=this._observer,c=this._settings,d=this._settings.load_delay,e=a.target;Q(a)&&(d?P(e,b,c):N(e,b,c)),Q(a)||O(e)},_onIntersection:function(b){b.forEach(this._manageIntersection.bind(this)),this._elements=a(this._elements)},_setObserver:function(){t&&(this._observer=new IntersectionObserver(this._onIntersection.bind(this),R(this._settings)))},loadAll:function(){var b=this;this._elements.forEach(function(a){b.load(a)}),this._elements=a(this._elements)},update:function(b){var c=this,d=this._settings,e=b||d.container.querySelectorAll(d.elements_selector);return this._elements=a(Array.prototype.slice.call(e)),s||!this._observer?void this.loadAll():void this._elements.forEach(function(a){c._observer.observe(a)})},destroy:function(){var b=this;this._observer&&(a(this._elements).forEach(function(a){b._observer.unobserve(a)}),this._observer=null),this._elements=null,this._settings=null},load:function(a,b){c(a,this._settings,b)}},r&&b(S,window.lazyLoadOptions),S});